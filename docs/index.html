<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Godhra Jamaat</title>
  <meta name="author" content="Burhanuddin Hamzabhai">
<link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">

	<style type="text/css">
  .login{
  background: url('homebg.jpeg');
  background-repeat: no-repeat;
  background-size: cover;
}
body{
  overflow-x: hidden;
}
html{
  -webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
-o-user-select: none;
user-select: none;
}
</style>
<script type="text/javascript" src="credentials.json"></script>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-database.js"></script>
<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-analytics.js"></script>

<script type="text/javascript" src="features.js"></script>
</head>
<body oncontextmenu="return false">

<div class="h-screen font-sans login bg-cover">
<div class="container mx-auto h-full flex flex-1 justify-center items-center">
    <div class="w-full max-w-lg">
      <div class="leading-loose">
        <div class="max-w-lg m-auto p-10 bg-white bg-opacity-50 rounded shadow-xl">
            <p class="text-2xl font-bold tracking-wide text-center">Welcome to Godhra Jamaat</p>
              <div class="">
                <label class="block text-sm text-black font-bold" for="email">ITS No.</label>
                <input class="w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white" type="text" id="itsno"  placeholder="ITS No."  required>
              </div>
              <div class="mt-2">
                <label class="block  text-sm text-black font-bold">Password</label>
                 <input class="w-full px-5 py-1 text-gray-700 bg-gray-300 rounded focus:outline-none focus:bg-white"
                  type="password" id="pass" placeholder="Password"  required>
              </div>

              <div class="mt-4 items-center flex justify-between">
                <button class="px-4 py-1 text-white font-light tracking-wider bg-green-500 hover:bg-green-700 rounded w-full"
                  type="button" id="loginBtn">Login</button>
               
                
              </div>
             <!-- <div class="flex items-center flex-wrap cursor-pointer bg-white rounded px-2 mt-5">
              <a class="text-green-700 inline-flex items-center md:mb-2 lg:mb-0" href="sadaqallah.html">Click here for Sadaqallah
                <svg class="w-4 h-4 ml-2" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14"></path>
                  <path d="M12 5l7 7-7 7"></path>
                </svg>
              </a>
            </div> -->

        </div>

      </div>
    </div>
  </div>
</div>

<!-- <footer class="text-white body-font">
  
  <div class="" style="background:#009866;">
    <div class="container mx-auto py-4 px-5 flex flex-wrap flex-col sm:flex-row">
      <p class="text-white text-sm text-center sm:text-left">Developed By â€”
        <a href="http://dot53.in/websolutions.html" class="text-white ml-1" target="_blank" rel="noopener noreferrer">Dot53 Web Solutions</a>
      </p>
      <span class="sm:ml-auto sm:mt-0 mt-2 sm:w-auto w-full sm:text-left text-center text-white text-sm"><a href="https://burhanuddinhamzabhai.dev/">Burhanuddin Hamzabhai</a></span>
    </div>
  </div>
</footer> -->
	<script>

    var itsnum;
    var username;
$(document).ready(function(){
	window.history.replaceState('','','/');
  $('#loginBtn').click(function(){
  	var ino=itsno.value;
  	var pwd=pass.value;
    var flag=false;
    $.getJSON("/test/test.js", function(result){

      $.each(result, function(i, field){
      		if(ino==field.ITS_ID && pwd==field.ITS_ID)
      		{
            flag=true;
      			var d = new Date();
  				d.setTime(d.getTime() + (24*60*60*1000));
  				var expires = "expires="+ d.toUTCString();
  				document.cookie =  "ITS=" + field.Full_Name + ";" + expires + ";path=/";
      			window.location.href="welcome.html";
            
            itsnum = field.ITS_ID;
            username= field.Full_Name;
            addUser();
            return false;
      		}

          //$("div").append(field.ITS_ID+"-"+field.Password+ "<br>");
      });
      if(flag==false)
      alert("You are not autheticated to view this content, please contact jamaat office.");
    });
    
  });
});

        window.oncontextmenu = function () {
            return false;
        }
        $(document).keydown(function (event) {
            if (event.keyCode == 123) {
                return false;
            }
            else if ((event.ctrlKey && event.shiftKey && event.keyCode == 73) || (event.ctrlKey && event.shiftKey && event.keyCode == 74)) {
                return false;
            }
        });

  var credentials = JSON.parse(data)
  console.log(credentials[0].measurementId)
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
  apiKey: credentials[0].apiKey,
  authDomain: credentials[0].authDomain,
  databaseURL: credentials[0].databaseURL,
  projectId: credentials[0].projectId,
  storageBucket: credentials[0].storageBucket,
  messagingSenderId: credentials[0].messagingSenderId,
  appId: credentials[0].appId,
  measurementId: credentials[0].measurementId
};
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
  var database = firebase.database()
 function addUser() {
     database.ref('Ashara/'+ (new Date().toDateString())).set({
        loginTime: new Date(),
        user: username,
        its: itsnum
     })
 }
</script>
</body>
</html>
